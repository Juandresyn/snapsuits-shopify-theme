<div id="get-fitted-app-size" class="app get-fitted-size get-fitted-app-size mfp-hide">
  <div class="app__mobile--header">
      <span class="app-mobile--header__back mfp-close js-reset-customizer iphone-safari"><span class="back-icon custom--carret-left"></span> GO BACK / CANCEL</span>
      <span class="app-mobile--header__back mfp-close js-reset-customizer no-iphone-safari"><span class="back-icon custom--carret-left"></span> GO BACK</span>
      <span class="app__quit"><span class="mfp-close app__quit-icon custom--close no-iphone-safari"></span></span>
      <div class="iphone-safari top-controls">
        <span class="btn-prev js-app-prev js-intro-prev"><span class="custom--carret-left"></span></span><!--
        --><span class="btn-next js-app-next js-intro-next js-app-rebel-next"><span class="custom--carret-right"></span></span><!--
        --><a href="#get-fitted-app" class="btn-next js-intro-next-alt js-prepare-gf mfp-close " style="display: none;"><span class="custom--carret-right"></span></a>
      </div>
  </div>
  <div class="app__wrapper">
    <span class="app__quit"><span class="mfp-close app__quit-icon custom--close desktop--only"></span></span>
    <div class="app__preview js-app-preview js-app-slider">
      <section class="app__door">
        <h2 class="app-door__title">SIZE COMPATIBILITY</h2>
        <p class="text--regular">Describe your body as it relates to shopping at a typical retail store.</p>
        <section class="app-preview__choices app__content" data-size="3">
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_size_compatibility" id="profile-fit-1" value="fit_profile_1">
            <label for="profile-fit-1" class="step-slide__label">
              <span class="step-slide__icon custom--profile-fit-1"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">Fit Profile 1</h3>
                <p class="text--regular step-slide__description step-slide__description--alter">I have an unusually large / odd size: <br> body builder, athlete, long arms, other, (typical sizing doesn’t fit)</p>
              </div>
            </label>
          </article>
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_size_compatibility" id="profile-fit-2" value="fit_profile_2" checked="checked" data-default="checked">
            <label for="profile-fit-2" class="step-slide__label">
              <span class="step-slide__icon custom--profile-fit-2"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">Fit Profile 2</h3>
                <p class="text--regular step-slide__description step-slide__description--alter">I fit into retail sizes just fine: XS, S, M, L, XL</p>
              </div>
            </label>
          </article>
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_size_compatibility" id="profile-fit-3" value="fit_profile_3">
            <label for="profile-fit-3" class="step-slide__label">
              <span class="step-slide__icon custom--profile-fit-3"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">Fit Profile 3</h3>
                <p class="text--regular step-slide__description step-slide__description--alter">I have am a typically smaller size: <br> shorter, very skinny, other, (typical sizing doesn’t fit)</p>
              </div>
            </label>
          </article>
        </section>
        <div class="app-preview__actions desktop--only">
          <span class="button js-app-prev">BACK</span>
          <span class="button button--primary js-app-rebel-next">Continue</span>
        </div>
      </section>
      <section class="app__door">
        <h2 class="app-door__title">SUIT EXPERIENCE</h2>
        <p class="text--regular">How many suits do you currently own?</p>
        <section class="app-preview__choices app__content" data-size="4">
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_suit_experience" id="suit-exp-1" value="0">
            <label for="suit-exp-1" class="step-slide__label">
              <span class="step-slide__icon custom--suit-exp-0"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">0</h3>
              </div>
            </label>
          </article>
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_suit_experience" id="suit-exp-2" value="1-2" checked="checked" data-default="checked">
            <label for="suit-exp-2" class="step-slide__label">
              <span class="step-slide__icon custom--suit-exp-1"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">1-2</h3>
              </div>
            </label>
          </article>
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_suit_experience" id="suit-exp-3" value="3-5">
            <label for="suit-exp-3" class="step-slide__label">
              <span class="step-slide__icon custom--suit-exp-3"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">2-5</h3>
              </div>
            </label>
          </article>
          <article class="step-slide__item">
            <input type="radio" class="step-slide__input" name="input_suit_experience" id="suit-exp-6" value="6+">
            <label for="suit-exp-6" class="step-slide__label">
              <span class="step-slide__icon custom--suit-exp-6"></span>
              <div class="step-slide__information">
                <h3 class="step-slide__title">6+</h3>
              </div>
            </label>
          </article>
        </section>
        <div class="app-preview__actions desktop--only">
          <span class="button js-app-prev">BACK</span>
          <a href="#get-fitted-app" class="button button--primary js-prepare-gf">Continue</a>
        </div>
      </section>
    </div>
    <footer class="app__footer" style="diplay: none;">
      <div class="actions-left js-actions">
        <a href="#close-alert" class="app__btn button js-popup mfp-close no-selection">cancel</a>
      </div>
      <div class="actions-right js-actions">
        <span class="app__btn button no-selection js-app-prev btn-prev">prev</span>
        <span class="app__btn btn-sp button button--primary no-selection m-r-0 js-app-rebel-next js-action-next btn-next">next</span>
      </div>
    </footer>
  </div>
  <div class="no-iphone-safari">
    <div class="app-preview__actions mobile--only js-actions-mobile destroy mobile-bottom--fixed">
      <span class="button js-app-prev">BACK</span>
      <span class="button button--primary js-actions-mobile--next-alt js-prepare-gf">Continue</span>
    </div>
  </div>
  <a href="#get-fitted-app" class="js-get-fitted-popup js-reset-get-fitted-intro mfp-close js-actions-mobile--next-alt hidden">gf</a>
</div>
<script type="text/javascript">
  $(document).on('ready', function(){
    function modalController(modal, slider, cb) {
      $.magnificPopup.open({
        items: {src: '#'+modal},
        type: 'inline',
        callbacks: {
          beforeOpen: function() {
            $('html, body').addClass('no-scroll');
            setTimeout(function(){
              $(slider).slick({
                draggable: false,
                arrows: false,
                infinite: false,
                touchMove: false,
                adaptiveHeight: true
              });
            }, 200);
            cb();
          },
          afterClose: function() {
            $('html, body').removeClass('no-scroll');
            Cookies.remove('{{ product.id }}')
          }
        }
      });
    }

    $('.js-prepare-gf').on('click', function(e){
      $('.js-get-fitted-slider.slick-initialized, .js-app-slider.slick-initialized').slick('unslick');
      $.magnificPopup.close();
      console.log('click');
      setTimeout(function() {
        modalController('get-fitted-app','.js-get-fitted-slider', function() {
          setTimeout(function(){
            $('[data-slide="0"]').trigger('click');
            setTimeout(function(){
              $('[data-slide="0"]').addClass('done');
            },100)
          },100);
        })
      },300);
    });
  });
</script>
